# Template metadata - ä»¥ä¸‹å­—æ®µä¼šåœ¨ç”Ÿæˆæ—¶è¢«æ›¿æ¢
# name: è®¢é˜…æˆ–é…ç½®åç§°ï¼Œç”¨äºç•Œé¢æ˜¾ç¤º
# port: clash æœ¬åœ°ç›‘å¬ç«¯å£
# socks-port: socks5 ç«¯å£
# redir-port: redir ç«¯å£ï¼ˆå¯é€‰ï¼‰
# allow-lan: æ˜¯å¦å…è®¸å±€åŸŸç½‘è®¿é—®ï¼ˆtrue/falseï¼‰
# __PROXIES__: è¿™é‡Œä¼šè¢«æ³¨å…¥å…·ä½“ä»£ç†é…ç½®ï¼ˆå®Œæ•´çš„ä»£ç†èŠ‚ç‚¹åˆ—è¡¨ï¼‰
# __PROXY_GROUPS__: è¿™é‡Œä¼šè¢«æ³¨å…¥ä»£ç†åˆ†ç»„é…ç½®ï¼ˆProxy Group æ¨¡æ¿ï¼‰

proxy-providers: {}

# Proxies å ä½ç¬¦ - è®¢é˜…è½¬æ¢å™¨åº”å°†æ‰€æœ‰èŠ‚ç‚¹æ›¿æ¢åˆ°æ­¤å¤„
# ä½¿ç”¨å ä½ç¬¦ `__PROXIES__`ï¼ˆåŒ…å« YAML åˆ—è¡¨ï¼‰ï¼Œç¤ºä¾‹ï¼š
# __PROXIES__:
# - name: "èŠ‚ç‚¹1"
#   type: vmess
#   server: 1.2.3.4
#   port: 443
#   uuid: xxxxx
#   alterId: 0
#   cipher: auto
# - name: "èŠ‚ç‚¹2"
#   type: ss
#   server: 5.6.7.8
#   port: 8388
#   cipher: chacha20-ietf-poly1305
#   password: "passwd"

proxies: __PROXIES__

# Proxy Groups æ¨¡æ¿ - è®¢é˜…è½¬æ¢å™¨å¯æ ¹æ®éœ€è¦æ›¿æ¢æˆ–æ‰©å±• `__PROXY_GROUPS__`
# å¸¸è§åˆ†ç»„ç¤ºä¾‹å·²æä¾›ï¼Œç”Ÿæˆå™¨åº”æ›¿æ¢ `__PROXY_NAMES__` ä¸ºæ‰€æœ‰ä»£ç†åç§°çš„é€—å·åˆ†éš”åˆ—è¡¨
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT, __PROXY_NAMES__]

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies: [__PROXY_NAMES__]

  - name: ğŸŒ å›½å¤–åª’ä½“
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ“² ç”µæŠ¥ä¿¡æ¯
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ¤– OpenAI
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ–¥ï¸ åº”ç”¨ç¨‹åº
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸ“ˆ ç½‘ç»œæµ‹é€Ÿ
    type: select
    proxies: [DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, __PROXY_NAMES__]

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT, __PROXY_NAMES__]

rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

  OpenAI:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./ruleset/OpenAI.yaml
    interval: 86400

  Telegram:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
    path: ./ruleset/Telegram.yaml
    interval: 86400

  YouTube:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/YouTube.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix.yaml"
    path: ./ruleset/Netflix.yaml
    interval: 86400

  Microsoft:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml
    interval: 86400

  Disney:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Disney/Disney.yaml"
    path: ./ruleset/Disney.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
    path: ./ruleset/Spotify.yaml
    interval: 86400

  Steam:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml"
    path: ./ruleset/Steam.yaml
    interval: 86400

  Speedtest:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Speedtest/Speedtest.yaml"
    path: ./ruleset/Speedtest.yaml
    interval: 86400

# gfwlist rules should be placed at the end of domain rules
# to avoid misclassification by other rules
# é»‘åå•è§„åˆ™åº”æ”¾åœ¨åŸŸåè§„åˆ™çš„æœ€åï¼Œä»¥é¿å…è¢«å…¶ä»–è§„åˆ™è¯¯åˆ¤
rules:
  - RULE-SET,applications,ğŸ–¥ï¸ åº”ç”¨ç¨‹åº
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT

  # ç‰¹å®šåº”ç”¨åˆ†æµ
  - RULE-SET,OpenAI,ğŸ¤– OpenAI
  - RULE-SET,YouTube,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,Netflix,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,Disney,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,Spotify,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,Telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,Steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,Speedtest,ğŸ“ˆ ç½‘ç»œæµ‹é€Ÿ

  # åŸºç¡€åˆ†æµ
  - RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥ä¿¡æ¯

  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
# -----------------------------
# ä½¿ç”¨è¯´æ˜ï¼ˆTemplate ä½¿ç”¨ä¸å ä½ç¬¦æ›¿æ¢ç¤ºä¾‹ï¼‰
# -----------------------------
# å ä½ç¬¦è¯´æ˜ï¼š
# - `__PROXIES__` : è®¢é˜…è½¬æ¢å™¨åº”å°†æ­¤å ä½ç¬¦æ›¿æ¢ä¸ºå®Œæ•´çš„ `proxies:` åˆ—è¡¨ï¼ˆYAML åˆ—è¡¨æ ¼å¼ï¼‰ï¼ŒåŒ…æ‹¬æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­—æ®µã€‚
# - `__PROXY_NAMES__` : ç”¨äºä»£ç†åˆ†ç»„ï¼Œæ›¿æ¢ä¸ºä»£ç†åç§°çš„é€—å·/æ–¹æ‹¬å·åˆ—è¡¨ï¼ˆæ— éœ€å¼•å·æˆ–å¸¦å¼•å·å‡å¯ï¼‰ï¼Œä¾‹å¦‚ï¼š"èŠ‚ç‚¹1, èŠ‚ç‚¹2" æˆ– ["èŠ‚ç‚¹1","èŠ‚ç‚¹2"]ã€‚
# - `__PROXY_GROUPS__` :ï¼ˆå¯é€‰ï¼‰å¦‚æœä½ æƒ³è®©ç”Ÿæˆå™¨æ›¿æ¢æ•´ä¸ª `proxy-groups` åŒºå—ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å ä½ç¬¦ã€‚

# æœ€å°æ›¿æ¢ç¤ºä¾‹ï¼ˆMustache é£æ ¼æˆ–ç®€å•æ¨¡æ¿æ›¿æ¢éƒ½å¯ï¼‰ï¼š
# æ¨¡æ¿ç‰‡æ®µï¼š
# proxies: __PROXIES__
# proxy-groups:
#   - name: "Proxy"
#     type: select
#     proxies: [__PROXY_NAMES__]
#
# Mustache ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š
# {
#   "proxies": {{#nodes}}
#   - name: "{{name}}"
#     type: {{type}}
#     server: {{server}}
#     port: {{port}}
#   {{/nodes}}
# }

# PowerShell (pwsh) ç®€å•æ›¿æ¢ç¤ºä¾‹ï¼š
# å‡è®¾å·²æœ‰ `proxies.yaml` å†…å®¹ï¼ˆå·²æ˜¯ YAML åˆ—è¡¨ï¼‰ï¼Œå°†å…¶æ³¨å…¥æ¨¡æ¿ä¸­çš„ `__PROXIES__`ï¼š
#
# $tpl = Get-Content -Raw .\clash\template.yaml
# $proxies = Get-Content -Raw .\out\proxies.yaml
# $tpl = $tpl -replace '__PROXIES__', $proxies
# $tpl | Set-Content .\clash\generated.yaml
#
# å°†ä»£ç†åç§°åˆ—è¡¨æ³¨å…¥ `__PROXY_NAMES__`ï¼ˆé€—å·æˆ– JSON æ•°ç»„å½¢å¼ï¼‰ï¼š
# $names = '"èŠ‚ç‚¹1","èŠ‚ç‚¹2","èŠ‚ç‚¹3"'   # æˆ–è€…ç”Ÿæˆ JSON æ•°ç»„
# $tpl = $tpl -replace '\[__PROXY_NAMES__\]', "[$names]"

# æ³¨æ„ä¸å»ºè®®ï¼š
# - ç¡®ä¿æ³¨å…¥çš„ YAML æ ¼å¼æ­£ç¡®ï¼ˆç¼©è¿›ä¸æ¢è¡Œï¼‰ï¼Œå¦åˆ™ clash è§£æä¼šå¤±è´¥ã€‚
# - æ¨èå…ˆå°† `__PROXIES__` æ›¿æ¢ä¸ºå¤šè¡Œ YAMLï¼ˆåŒ…å«æ¯ä¸ªä»£ç†å®Œæ•´å­—æ®µï¼‰ï¼Œå†å°† `__PROXY_NAMES__` æ›¿æ¢ä¸ºä»£ç†åç§°æ•°ç»„ã€‚
# - å¦‚æœéœ€è¦ `proxy-providers` åŠŸèƒ½ï¼Œè¯·åœ¨ `proxy-providers:` ä¸‹ä»¥ YAML å¯¹è±¡å½¢å¼å¡«å……ï¼Œå¹¶åœ¨ `proxy-groups` ä¸­ä½¿ç”¨ `PROXY-PROVIDER-NAME`ã€‚

# ç¤ºä¾‹ï¼šæœ€ç»ˆç”Ÿæˆåçš„å…³é”®æ®µï¼ˆç¼©ç•¥ç¤ºæ„ï¼‰
# proxies:
# - name: "èŠ‚ç‚¹1"
#   type: vmess
#   server: 1.2.3.4
#   port: 443
# - name: "èŠ‚ç‚¹2"
#   type: ss
#   server: 5.6.7.8
#   port: 8388
#
# proxy-groups:
# - name: "Proxy"
#   type: select
#   proxies:
#     - èŠ‚ç‚¹1
#     - èŠ‚ç‚¹2

# å¦‚æœä½ å¸Œæœ›æˆ‘ä¸ºè®¢é˜…è½¬æ¢å™¨ç”Ÿæˆä¸€ä¸ªç¤ºä¾‹è„šæœ¬ï¼ˆNode/Python/PowerShellï¼‰ï¼Œå‘Šè¯‰æˆ‘åå¥½è¯­è¨€ï¼Œæˆ‘å¯ä»¥ç»§ç»­ç”Ÿæˆã€‚
